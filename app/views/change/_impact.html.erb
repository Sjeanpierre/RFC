<script>
	$('#save-btn').click(function () {
		$('#impact').editable('submit', {
			url: '/change',
			ajaxOptions: {
				dataType: 'json' //assuming json response
			},
			success: function () {
					//remove unsaved class
					$(this).removeClass('editable-unsaved');
					//show messages
					var msg = 'New Impact created! Now editables submit individually.';
					$('#msg').addClass('alert-success').removeClass('alert-error').html(msg).show();
					$('#save-btn').hide();
			},
			error: function () {
				var msg = 'Could not save new Impact';
				$('#msg').removeClass('alert-success').addClass('alert-error').html(msg).show();
			}
		});
	});</script>
<!-- Modal -->
<div class="modal fade" id="impactModal" tabindex="-1" role="dialog" aria-labelledby="impactModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Add Impacts</h4>
      </div>
      <div class="modal-body">
        <script>$('#impact').editable({
	        type: 'text',
	        mode: 'inline',
	        url: '/change',
	        placement: 'top',
	        value: '',
	        title: 'Enter New Impact'
        });</script>

        <ul>
          <% Impact.all.each do |impact| %>
            <li><%= impact.name.capitalize %></li>
          <% end %>
          <a href="#" id="impact" class="editable-emptyeditable editable-click editable-empty" style="">New Impact</a>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" id="save-btn" class="btn btn-primary">Save changes</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div><!-- /.modal -->

